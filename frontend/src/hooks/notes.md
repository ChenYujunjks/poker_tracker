å¤ªæ£’äº†ï¼Œä½ é—®çš„è¿™ä¸ªé—®é¢˜æ˜¯å¾ˆå¤šé«˜çº§ React å·¥ç¨‹å¸ˆä¸€å¼€å§‹ä¹Ÿä¼šå›°æƒ‘çš„æ ¸å¿ƒé—®é¢˜ï¼š

> **ä¸ºä»€ä¹ˆ React åªèƒ½åœ¨ `useXXX()` è¿™ç§ Hook é‡Œä½¿ç”¨å…¶ä»– Hookï¼Œæ¯”å¦‚ `useUser()`ã€`useEffect()`ï¼Ÿ**
>
> React å¼•æ“æ˜¯**æ€ä¹ˆè¯†åˆ«å“ªäº›åœ°æ–¹èƒ½ç”¨ Hookï¼Œå“ªäº›åœ°æ–¹ä¸èƒ½ç”¨**çš„ï¼Ÿ

---

## âœ… React æ˜¯â€œè¿è¡Œæ—¶ + ç¼–è¯‘æ—¶â€éƒ½åšäº† Hook è°ƒç”¨çš„è§„åˆ™é™åˆ¶

### ğŸ“Œ React æœ‰ä¸€å¥—**è¿è¡Œæ—¶è§„åˆ™ï¼ˆRules of Hooksï¼‰**ï¼Œæ ¸å¿ƒè§„åˆ™æœ‰ï¼š

### ğŸ”’ **åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰ Hook é¡¶å±‚è°ƒç”¨ Hook**

ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ä¸‹è¿™äº›åœ°æ–¹æ‰èƒ½åˆæ³•è°ƒç”¨ `useXxx()`ï¼š

```ts
âœ… âœ…
function MyComponent() {
  const user = useUser();
}
```

```ts
âœ… âœ…
function useSomething() {
  const user = useUser();
}
```

---

### ğŸš« ä»¥ä¸‹è¿™äº›åœ°æ–¹ä¸èƒ½è°ƒç”¨ Hookï¼š

```ts
// âŒ æ™®é€šå‡½æ•°
function doSomething() {
  const user = useUser(); // âŒ Illegal hook call
}
```

```ts
// âŒ if/for ç­‰éé¡¶å±‚
function useSomething() {
  if (true) {
    const user = useUser(); // âŒ éé¡¶å±‚è°ƒç”¨
  }
}
```

---

## ğŸ”¬ é‚£ React æ˜¯**æ€ä¹ˆåˆ¤æ–­ä½ è¿åè§„åˆ™çš„ï¼Ÿ**

### ğŸ§  å…¶å® React æ˜¯é€šè¿‡â€œæ ˆè¿½è¸ª + å‡½æ•°ç­¾å + è°ƒç”¨è·¯å¾„â€æ¥è¯†åˆ«éæ³• Hook è°ƒç”¨çš„ã€‚

- React å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª **â€œæ­£åœ¨æ¸²æŸ“çš„ç»„ä»¶/Hook æ ˆâ€**
- æ¯æ¬¡è°ƒç”¨ Hookï¼ˆå¦‚ `useEffect()`ï¼‰æ—¶ï¼Œä¼šæ£€æŸ¥ï¼š

  - ğŸ‘€ ä½ æ˜¯ä¸æ˜¯åœ¨ React çš„ render æµç¨‹ä¸­è°ƒç”¨çš„ï¼Ÿ
  - ğŸ§© æ˜¯ä¸æ˜¯ä»åˆæ³•çš„ç»„ä»¶/Hook ä¸­è§¦å‘çš„ï¼Ÿ

- ä¸€æ—¦ä½ åœ¨æ™®é€šå‡½æ•°ä¸­è°ƒç”¨äº† `useXxx()`ï¼Œå®ƒå°±ä¼šæ£€æµ‹åˆ°è°ƒç”¨è·¯å¾„ä¸åˆæ³•ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯ã€‚

---

## âœ… ä¸¾ä¸ªç›´è§‚ä¾‹å­

### âœ… åˆæ³•è°ƒç”¨é“¾ï¼š

```
React æ¸²æŸ“ç»„ä»¶
 â””â”€> MyComponent()
      â””â”€> useCreateSession()
            â””â”€> useUser()   âœ… React Hook è°ƒç”¨æ ˆåˆæ³•
```

### âŒ éæ³•è°ƒç”¨é“¾ï¼š

```
React æ¸²æŸ“ç»„ä»¶
 â””â”€> MyComponent()
      â””â”€> createSession() // æ™®é€šå‡½æ•°
           â””â”€> useUser()   âŒ æŠ¥é”™ï¼šInvalid hook call
```

---

## ğŸ§  React ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ

ä¸ºäº†è®© Hook çš„è¡Œä¸º **å¯é¢„æµ‹ã€å¯é‡æ”¾ã€å¯é™æ€åˆ†æ**ã€‚

React æ˜¯ä¸€ä¸ªâ€œå£°æ˜å¼ UI æ¡†æ¶â€ï¼Œå®ƒå¿…é¡»ç¡®ä¿ï¼š

- ä½ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šâ€œé¡ºåºä¸€è‡´åœ°è°ƒç”¨ Hookâ€
- å¦åˆ™ `useState()`ã€`useEffect()` å°±ä¸çŸ¥é“ä½ æ˜¯ç¬¬å‡ ä¸ª Hook äº†

> â— å¦‚æœå…è®¸ä½ åœ¨ for å¾ªç¯ã€if æ¡ä»¶ã€æ™®é€šå‡½æ•°é‡Œéšæ„è°ƒç”¨ Hookï¼Œä¼šè®© React æ— æ³•ç¡®å®š hook å¯¹åº”å“ªä¸€ä¸ª state slotï¼Œæ•´ä¸ªæœºåˆ¶ä¼šå´©æºƒã€‚

---

## âœ… æ€»ç»“ï¼šä¸ºä»€ä¹ˆä¸èƒ½åœ¨æ™®é€šå‡½æ•°é‡Œè°ƒç”¨ `useUser()`ï¼Ÿ

| åŸå›                | è§£é‡Š                                 |
| ------------------ | ------------------------------------ |
| React æœ‰ Hook è§„åˆ™ | åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰ Hook é¡¶å±‚è°ƒç”¨ |
| è¿è¡Œæ—¶æ ¡éªŒè°ƒç”¨æ ˆ   | React ä¼šæ£€æŸ¥è°ƒç”¨è·¯å¾„æ˜¯å¦åˆæ³•         |
| çŠ¶æ€é¡ºåºå¿…é¡»ç¨³å®š   | Hook çš„é¡ºåºä¸€æ—¦æ··ä¹±ï¼Œstate ä¼šé”™ä½    |

---

âœ… å®Œå…¨æ­£ç¡®ï¼ä½ å·²ç»å‡†ç¡®æŠ“ä½äº† React Hook è°ƒç”¨è§„åˆ™çš„**ä¸¤ä¸ªæ ¸å¿ƒè¯†åˆ«ç‚¹**ï¼š

---

## âœ… React å¦‚ä½•è¯†åˆ«å“ªäº›å‡½æ•°èƒ½ä½¿ç”¨ Hookï¼Ÿ

React åœ¨è¿è¡Œæ—¶ï¼ˆå’Œéƒ¨åˆ†ç¼–è¯‘å·¥å…·å¦‚ ESLint æ’ä»¶ï¼‰ä¼šé»˜è®¤ï¼š

### 1ï¸âƒ£ **å‡½æ•°ç»„ä»¶**

> âœ”ï¸ âœ… â€œå‡½æ•°åé¦–å­—æ¯å¤§å†™â€ âœ æ˜¯ React ç»„ä»¶

```tsx
function MyComponent() {
  const user = useUser(); // âœ… åˆæ³•
  return <div>Hello, {user.name}</div>;
}
```

- React ä¼šåœ¨ render æ—¶è°ƒç”¨è¿™ä¸ªå‡½æ•°
- æ‰€ä»¥å…¶ä¸­è°ƒç”¨ `useState()`ã€`useEffect()` æ˜¯åˆæ³•çš„

---

### 2ï¸âƒ£ **è‡ªå®šä¹‰ Hook**

> âœ”ï¸ âœ… â€œå‡½æ•°åä»¥ `use` å¼€å¤´â€ âœ æ˜¯ React Hook

```ts
function useSessionData() {
  const user = useUser(); // âœ… åˆæ³•
  return { user };
}
```

- React ä¼šè®¤ä¸ºä½ åœ¨ç¼–å†™ä¸€ä¸ª Hook
- å®ƒå…è®¸ä½ åœ¨ Hook ä¸­è°ƒç”¨å…¶ä»– Hookï¼ˆåªè¦åœ¨**é¡¶å±‚**è°ƒç”¨ï¼‰

---

## ğŸš« ä»¥ä¸‹éƒ½æ˜¯ä¸åˆæ³•çš„ Hook ä½¿ç”¨åœºæ™¯

### âŒ æ™®é€šå‡½æ•°ï¼ˆéç»„ä»¶ã€é Hookï¼‰

```ts
function createSession() {
  const user = useUser(); // âŒ æŠ¥é”™ï¼šInvalid hook call
}
```

> â— React ä¸ä¼šâ€œè¿½è¸ªâ€è¿™ä¸ªå‡½æ•°ï¼Œä¹Ÿä¸çŸ¥é“å®ƒæ˜¯åœ¨å“ªä¸ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸé‡Œè§¦å‘çš„

---

### âŒ æ¡ä»¶ã€å¾ªç¯ã€åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hookï¼ˆè¿åâ€œé¡¶å±‚è°ƒç”¨â€ï¼‰

```tsx
function MyComponent() {
  if (someCondition) {
    const user = useUser(); // âŒ æŠ¥é”™ï¼šHook ä¸èƒ½æ”¾åœ¨ if è¯­å¥é‡Œ
  }
}
```

---

## âœ… æ€»ç»“å£è¯€ï¼šReact Hook åˆæ³•ä½¿ç”¨åœºæ™¯

| åœºæ™¯ç±»å‹        | å‘½åè§„åˆ™         | æ˜¯å¦èƒ½è°ƒç”¨å…¶ä»– Hook |
| --------------- | ---------------- | ------------------- |
| å‡½æ•°ç»„ä»¶        | âœ… é¦–å­—æ¯å¤§å†™    | âœ… å¯ä»¥             |
| è‡ªå®šä¹‰ Hook     | âœ… ä»¥ `use` å¼€å¤´ | âœ… å¯ä»¥             |
| æ™®é€šå‡½æ•°        | âŒ ä»»æ„å‘½å      | âŒ ä¸å¯ä»¥           |
| if/for/åµŒå¥—å‡½æ•° | âŒ éé¡¶å±‚        | âŒ ä¸å¯ä»¥           |

---

### âœ… ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼š

> React ä¼šåœ¨â€œ**ç»„ä»¶ render æµç¨‹**â€ä¸­æ„å»ºä¸€æ¡è°ƒç”¨æ ˆï¼Œ
> æ‰€æœ‰ `useX()` å¿…é¡»åœ¨è¿™ä¸ªæ ˆä¸Š â€”â€” å¦‚æœè„±ç¦»è¿™ä¸ªè·¯å¾„ï¼Œå°±ä¼šè§¦å‘ `Invalid hook call` é”™è¯¯ã€‚
